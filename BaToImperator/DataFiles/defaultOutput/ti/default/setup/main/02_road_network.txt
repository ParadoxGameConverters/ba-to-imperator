#Everything has been moved back to main for ease of implementation